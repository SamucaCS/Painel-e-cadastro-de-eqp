<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard - Gestão de Equipamentos</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <link rel="stylesheet" href="relatorios.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>

  <body>
    <div class="bg-grid"></div>

    <header class="site-header">
      <div class="container nav">
        <div class="brand">
          <div class="logo-dot"></div>
          <div>
            <span class="brand-name">Controle SEINTEC</span>
            <span class="brand-role">Controle de Ativos</span>
          </div>
        </div>

        <nav class="nav-links">
          <a href="cadastro.html">Cadastro</a>
          <a href="lista.html">Lista</a>
          <a href="relatorio.html" class="active">Dashboard</a>
        </nav>
      </div>
    </header>

    <main class="container main-content">
      <section class="dashboard-header">
        <div class="header-text">
          <h1>Visão Geral da Rede</h1>
          <p>Acompanhamento em tempo real do inventário escolar.</p>
        </div>

        <div class="school-selector-wrapper">
          <i class="ph ph-buildings"></i>
          <select id="schoolSelect">
            <option value="all">Carregando escolas...</option>
          </select>
          <div class="selector-status" id="viewModeLabel">Visão Geral</div>
        </div>
      </section>

      <div class="dashboard-grid">
        <section class="stats-column">
          <div class="stat-card total-card">
            <div class="stat-icon-wrapper">
              <i class="ph-fill ph-stack"></i>
            </div>
            <div>
              <span class="stat-label">Total de Ativos</span>
              <h2 class="stat-value big" id="totalEquip">0</h2>
            </div>
          </div>

          <div class="chart-container">
            <div class="chart-header">
              <h3>Distribuição</h3>
            </div>
            <div class="chart-wrapper">
              <canvas id="equipmentChart"></canvas>
            </div>
          </div>
        </section>

        <section class="details-column">
          <div class="section-title-row">
            <h3>Inventário Detalhado</h3>
            <span class="live-indicator"
              ><span class="dot"></span> Atualizado</span
            >
          </div>

          <form id="editForm" class="inventory-grid">
            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-laptop"></i>
                <span>Positivo</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalPositivo">0</span>
                <input
                  type="number"
                  id="inputPositivo"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-laptop"></i>
                <span>Lenovo</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalLenovo">0</span>
                <input
                  type="number"
                  id="inputLenovo"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-google-chrome-logo"></i>
                <span>Chromebook</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalChromebook">0</span>
                <input
                  type="number"
                  id="inputChromebook"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-laptop"></i>
                <span>Multilaser</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalMultilaser">0</span>
                <input
                  type="number"
                  id="inputMultilaser"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-desktop"></i>
                <span>Desktop</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalDesktop">0</span>
                <input
                  type="number"
                  id="inputDesktop"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-device-tablet-camera"></i>
                <span>Tablet</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalTablet">0</span>
                <input
                  type="number"
                  id="inputTablet"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="inventory-card">
              <div class="inv-header">
                <i class="ph-duotone ph-device-mobile"></i>
                <span>Celular</span>
              </div>
              <div class="inv-body">
                <span class="read-value" id="totalCelular">0</span>
                <input
                  type="number"
                  id="inputCelular"
                  class="edit-input"
                  min="0"
                  placeholder="0"
                />
              </div>
            </div>

            <div class="action-card">
              <div id="editInfoBox" class="info-text">
                Selecione uma escola acima para habilitar a edição.
              </div>
              <button
                type="submit"
                id="btnSaveChanges"
                class="btn-save"
                disabled
              >
                <i class="ph-bold ph-floppy-disk"></i>
                Salvar Alterações
              </button>
              <span id="editMessage" class="status-msg"></span>
            </div>
          </form>
        </section>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <span>Gestão TI</span>
        <span class="dot-separator"></span>
        <span>Painel Administrativo v2.0</span>
      </div>
    </footer>

    <script src="relatorios.js"></script>
  </body>
</html>
